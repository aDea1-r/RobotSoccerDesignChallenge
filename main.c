#pragma config(Sensor, dgtl12, LED,            sensorLEDtoVCC)
#pragma config(Motor,  port1,            ,             tmotorVex393_HBridge, openLoop)
#pragma config(Motor,  port2,           leftMotor,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           rightMotor,    tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port4,           gate,          tmotorServoStandard, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

bool gateOpen = true;
bool bPressed = false;

void moveWheels()
{
	motor[rightMotor] = vexRT[Ch2];
	motor[leftMotor] = vexRT[Ch3];
}

void manageGate()
{
	if(vexRT[Btn6D] == 1 && !bPressed) {
		if(gateOpen) {
			setServo(gate,127);
			waitInMilliseconds(100);
			gateOpen = false;
		}
		else {
			setServo(gate,-127);
			waitInMilliseconds(100);
			gateOpen = true;
		}
			bPressed = true;
		}
		if(vexRT[Btn6D] == 0) {
			bPressed = false;
		}
}

task main()
{
	while(true) {
		moveWheels();
		manageGate();
	}
}
